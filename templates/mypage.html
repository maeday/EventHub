{% include 'header.html' %}
{% include "create.html" %}

<div class="row">
	{% if error == "ALREADY_EXISTS" %}
		<div id="login-error" class="alert alert-error" style="display:none;margin-top:10px;margin-bottom:0;">
			<button type="button" class="close" data-dismiss="alert">Ã—</button>
			<strong>Oh snap!</strong> That Facebook account is already connected to an existing EventHub account.
			If you would like to connect a different Facebook account, please log out of Facebook and try again.		
		</div>
	{% endif %}

	<!--My Profile-->
	<div class="span5">
		<div class="well well-custom">
			<div class="title">
				<h3>My Profile<button class="btn btn-medium btn-primary pull-right" type="button" data-toggle="modal" data-target="#EditProfile" style="margin-top: 3px;" >Edit Profile</button></h3>
			</div>
			<div>
				<div class="row">
					<div class="span2" style="margin-right: 0px;padding-right0px;width:120px">
					{% if user.get_profile.use_fb_pic == 1 %}
						{% if user.get_profile.fbid != -1 %}
						<img src="https://graph.facebook.com/{{ user.get_profile.fbid }}/picture?type=normal" class="img-polaroid profile-medium" name = "{{user.get_profile.use_fb_pic}}" />
						{% else %}
						<img src="{{ STATIC_URL }}img/profilePicPlaceholder.png" alt="No profile pic chosen" class="img-polaroid profile-medium" />
						{% endif %}
					{% else %}
						{% if user.get_profile.pic %}
						<img src="{{user.get_profile.pic.url}}" class="img-polaroid profile-medium" name = "{{user.get_profile.use_fb_pic}}" />
						{% else %}
						<img src="{{ STATIC_URL }}img/profilePicPlaceholder.png" alt="No profile pic chosen" class="img-polaroid profile-medium" />
						{% endif %}
					{% endif %}
					</div>
					<div class="span3" style="margin-left: 0px;padding-left: 0px">
						<p>
							<strong>First name:</strong> {{ user.first_name }}
						</p>
						<p>
							<strong>Last name: </strong>{{ user.last_name }}
						</p>
						<p>
							<strong>Email address:</strong> {{ user.email }}
						</p>
						{% if user.get_profile.fbid == -1 %}<a href="https://www.facebook.com/dialog/oauth?client_id={{ app_id }}&redirect_uri={{ redir_uri|urlencode:"" }}&state=test">Connect with Facebook</a>{% endif %}
						
					</div>
				</div>
			</div>
		</div>
	</div>
	
	
	<!--My events-->
	<div class="span7">
		<div class="well well-custom">
			<div>
				<h3>My Events <button class="btn btn-medium btn-primary pull-right" type="button" data-toggle="modal" data-target="#createEvent" style="margin-top:5px;">Create Event</button></h3>
			</div>
			<table class="table table-hover">
			<tbody>
			{% if user_events %} {% for event in user_events %}
			<tr>
				<td>
					<img src="{% if event.image %}{{ event.image.url }}{% else %}{{ STATIC_URL }}photos/no-image-big.png{% endif %}"  class="img-polaroid" style="width:140px;height:90px">
				</td>
				<td>
					<div style="padding-top:0;padding-bottom:0;">
						<h4><a href="/event/{{ event.id }}">{{ event.name }}</a><button class="close delete_close" rel="popover" title="Delete Event" value={{ event.id }}>&times;</button></h4>
					</div>
					<strong>{{ event.start_date|date:"l, F j" }} </strong>
					<p>
						{{ event.start_date|date:"g:i A" }}
					</p>
					<button class="btn btn-small btn-primary pull-right" type="button" data-toggle="modal" data-target="#editEvent{{ event.id }}" style="margin-top: 3px;" >Edit Event</button>
				</td>
			</tr>
			<!-- Edit Event modal -->
            {% include "edit.html" %}
			{% endfor %} {% else %}
			<p>
					No events are available.
			</p>
 			{% endif %}
			</tbody>
			</table>
			<p>
				<a href="#">See all (7)...</a>
			</p>
		</div>
	</div>
</div>

<!-- Edit Profile modal-->
<div id="EditProfile" class="modal modal-profile hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3 id="myModalLabel">Edit my Profile</h3>
	</div>
	<div class="modal-body">
		<div class="form-horizontal">
		    <legend><small>Personal</small></legend>
			<div class="control-group">
				<div class="row">
						<label class="control-label-custom " for="input01">First name</label>
						<div class="controls-custom controls-row">
							<input id="first-name" type="text" class="input-small" id="input01" name="title" value="{{ user.first_name }}" >
						    Last name&nbsp;&nbsp;&nbsp;<input id="last-name" type="text" class="input-medium" id="input01" name="title" value="{{ user.last_name }}" >
						</div>
				</div>
				<div class="control-label-profile" style="width:600px;padding-top: 20px;">
						Email&nbsp;address: <h7>{{ user.email }}</h7>
				</div>

		    </div>

    		<div class="control-group">
				<legend><small>Profile Picture</small></legend>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<label class="radio inline">
					<input type="radio" name="picType" id="fbPic" value="fbPic" onChange="disablefield();">
					Use Facebook Picture
				</label>
				<label class="radio inline">
					<input type="radio" name="picType" id="noFbPic" value="pic" checked="checked" onChange="disablefield();" >
					Upload picture
				</label>
			</div>
			<div class="control-group">
				<label class="control-label-profile" style="width:90px;" for="input11">Image</label>
				<div class="controls-custom">
					<div class="input-append">
						<input type="file" name="uploadPic" id="uploadPic"/>
					</div>
				</div>
			</div>

			
			<div class="control-group">
				 <legend><small>Change Password</small></legend>
				<label class="control-label-profile" for="input01">Current&nbsp;Password</label>
				<div class="controls-custom">
					<input id="old-password" type="password" class="input-medium" id="input01" name="title"  ><span class="help-inline"></span>
				</div>
			</div>
				
			<div class="control-group">
				<label class="control-label-profile" for="input01">New&nbsp;Password</label>
				<div class="controls-custom">
					<input id="new-password-1" type="password" class="input-medium" id="input01" name="title" ><span class="help-inline"></span>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label-profile" for="input01">Confirm&nbsp;new&nbsp;password</label>
				<div class="controls-custom">
					<input id="new-password-2" type="password" class="input-medium" id="input01" name="title" ><span class="help-inline"></span>
				</div>
			</div>
			
		</div>
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal">Cancel</button>
		<button id = "editProfile_btn" class="btn btn-primary">Save</button>
	</div>
</div>



{% include "footer.html" %}
